{"version":3,"sources":["TodoInput.js","TodoItem.js","leanCloud.js","UserDialog.js","App.js","index.js"],"names":["TodoInput","react_default","a","createElement","type","value","this","props","content","className","onChange","changeTitle","bind","onKeyPress","submit","e","key","onSubmit","Component","TodoItem","checked","todo","status","toggle","title","onClick","delete","onToggle","onDelete","AV","init","appId","appKey","getUserFromAVUser","AVUser","Object","objectSpread","id","attributes","UserDialog","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","selected","formData","username","password","setState","target","_this2","preventDefault","_this$state$formData","successFn","errorFn","user","User","setUsername","setPassword","signUp","then","loginedUser","error","onSignUp","code","alert","_this3","_this$state$formData2","logIn","signIn","onSignIn","stateCopy","JSON","parse","stringify","signUpForm","changeFormData","signInForm","switch","App","current","getCurrentUser","newTodo","todoList","todos","filter","item","deleted","map","index","TodoItem_TodoItem","signOut","TodoInput_TodoInput","addTodo","UserDialog_UserDialog","onSignUpOrSignIn","logOut","event","push","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"gVAGsBA,4MAElB,OAAOC,EAAAC,EAAAC,cAAA,SAAOC,KAAK,OAAOC,MAAOC,KAAKC,MAAMC,QAC5CC,UAAU,YACRC,SAAUJ,KAAKK,YAAYC,KAAKN,MAClCO,WAAYP,KAAKQ,OAAOF,KAAKN,uCAExBS,GACS,UAAVA,EAAEC,KACFV,KAAKC,MAAMU,SAASF,uCAGdA,GACVT,KAAKC,MAAMG,SAASK,UAbgBG,cCAlBC,0LAElB,OACIlB,EAAAC,EAAAC,cAAA,OAAKM,UAAU,YACfR,EAAAC,EAAAC,cAAA,SAAOC,KAAK,WAAWgB,QAAoC,cAA3Bd,KAAKC,MAAMc,KAAKC,OAC9CZ,SAAUJ,KAAKiB,OAAOX,KAAKN,QAC7BL,EAAAC,EAAAC,cAAA,QAAMM,UAAU,SAASH,KAAKC,MAAMc,KAAKG,OACzCvB,EAAAC,EAAAC,cAAA,UAAQsB,QAASnB,KAAKoB,OAAOd,KAAKN,OAAlC,gDAIGS,GACLT,KAAKC,MAAMoB,SAASZ,EAAGT,KAAKC,MAAMc,qCAE/BN,GACLT,KAAKC,MAAMqB,SAASb,EAAGT,KAAKC,MAAMc,aAfCH,6CCCvCW,IAAGC,KAAK,CACNC,MAHY,oCAIZC,OAHY,6BAMEH,EAAf,EA0CC,SAASI,EAAkBC,GAC1B,OAAOC,OAAAC,EAAA,EAAAD,CAAA,CACLE,GAAIH,EAAOG,IACRH,EAAOI,gBCnDMC,cACjB,SAAAA,EAAYhC,GAAM,IAAAiC,EAAA,OAAAL,OAAAM,EAAA,EAAAN,CAAA7B,KAAAiC,IACdC,EAAAL,OAAAO,EAAA,EAAAP,CAAA7B,KAAA6B,OAAAQ,EAAA,EAAAR,CAAAI,GAAAK,KAAAtC,KAAMC,KACDsC,MAAQ,CACTC,SAAU,SACVC,SAAU,CACRC,SAAU,GACVC,SAAU,KANFT,sEAUTzB,GACLT,KAAK4C,SAAS,CACZJ,SAAU/B,EAAEoC,OAAO9C,uCAGhBU,GAAE,IAAAqC,EAAA9C,KACPS,EAAEsC,iBADK,IAAAC,EAEoBhD,KAAKuC,MAAME,UDVtC,SAAgBC,EAAUC,EAAUM,EAAWC,GAEpD,IAAIC,EAAO,IAAI5B,IAAG6B,KAElBD,EAAKE,YAAYX,GAEjBS,EAAKG,YAAYX,GAEjBQ,EAAKI,SAASC,KAAK,SAAUC,GAC3B,IAAIN,EAAOxB,EAAkB8B,GAC7BR,EAAUX,KAAK,KAAMa,IACpB,SAAUO,GACXR,EAAQZ,KAAK,KAAMoB,KCYhBH,CAhBOP,EAEFN,SAFEM,EAEQL,SACD,SAACQ,GACfL,EAAK7C,MAAM0D,SAASrB,KAAK,KAAMa,IAEnB,SAACO,GACT,OAAOA,EAAME,MACT,KAAK,IACHC,MAAM,8CACN,MACF,QACEA,MAAMH,qCAMXjD,GAAE,IAAAqD,EAAA9D,KACPS,EAAEsC,iBADK,IAAAgB,EAEoB/D,KAAKuC,MAAME,UDVrC,SAAgBC,EAAUC,EAAUM,EAAWC,GACpD3B,IAAG6B,KAAKY,MAAMtB,EAAUC,GAAUa,KAAK,SAAUC,GAC/C,IAAIN,EAAOxB,EAAkB8B,GAC7BR,EAAUX,KAAK,KAAMa,IACpB,SAAUO,GACXR,EAAQZ,KAAK,KAAMoB,KCmBjBO,CAhBOF,EAEFrB,SAFEqB,EAEQpB,SACD,SAACQ,GACbW,EAAK7D,MAAMiE,SAAS5B,KAAK,KAAMa,IAErB,SAACO,GACT,OAAOA,EAAME,MACT,KAAK,IACHC,MAAM,0DACN,MACF,QACEA,MAAMH,6CAMHhD,EAAKD,GAClB,IAAI0D,EAAYC,KAAKC,MAAMD,KAAKE,UAAUtE,KAAKuC,QAC/C4B,EAAU1B,SAAS/B,GAAOD,EAAEoC,OAAO9C,MACnCC,KAAK4C,SAASuB,oCAGd,IAAII,EACA5E,EAAAC,EAAAC,cAAA,QAAMM,UAAU,SAASQ,SAAUX,KAAKuD,OAAOjD,KAAKN,OAApD,IACEL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,OACbR,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,OAAOC,MAAOC,KAAKuC,MAAME,SAASC,SAClDtC,SAAUJ,KAAKwE,eAAelE,KAAKN,KAAM,eAGvCL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,OACbR,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,WAAWC,MAAOC,KAAKuC,MAAME,SAASE,SACvDvC,SAAUJ,KAAKwE,eAAelE,KAAKN,KAAM,eAEtCL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,eACbR,EAAAC,EAAAC,cAAA,UAAQC,KAAK,UAAb,kBAIF2E,EACF9E,EAAAC,EAAAC,cAAA,QAAMM,UAAU,SAASQ,SAAUX,KAAKiE,OAAO3D,KAAKN,OAApD,IACEL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,OACbR,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,OAAOC,MAAOC,KAAKuC,MAAME,SAASC,SACjDtC,SAAUJ,KAAKwE,eAAelE,KAAKN,KAAM,eAExCL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,OACbR,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,WAAWC,MAAOC,KAAKuC,MAAME,SAASE,SACrDvC,SAAUJ,KAAKwE,eAAelE,KAAKN,KAAM,eAExCL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,eACbR,EAAAC,EAAAC,cAAA,UAAQC,KAAK,UAAb,kBAIZ,OACEH,EAAAC,EAAAC,cAAA,OAAKM,UAAU,sBACbR,EAAAC,EAAAC,cAAA,OAAKM,UAAU,cACfR,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,QAAQC,MAAM,SACxBe,QAAiC,WAAxBd,KAAKuC,MAAMC,SACpBpC,SAAUJ,KAAK0E,OAAOpE,KAAKN,QAH/B,iBAKAL,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,QAAQC,MAAM,SACxBe,QAAiC,WAAxBd,KAAKuC,MAAMC,SACpBpC,SAAUJ,KAAK0E,OAAOpE,KAAKN,QAH/B,kBAMFL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,SACU,WAAxBH,KAAKuC,MAAMC,SAAwB+B,EAAa,KACtB,WAAxBvE,KAAKuC,MAAMC,SAAwBiC,EAAa,eA9GrB7D,aC4FzB+D,cArFb,SAAAA,EAAY1E,GAAM,IAAAiC,EAAA,OAAAL,OAAAM,EAAA,EAAAN,CAAA7B,KAAA2E,IAChBzC,EAAAL,OAAAO,EAAA,EAAAP,CAAA7B,KAAA6B,OAAAQ,EAAA,EAAAR,CAAA8C,GAAArC,KAAAtC,KAAMC,KACDsC,MAAQ,CACXY,KFyBG,WACL,IAAIA,EAAO5B,IAAG6B,KAAKwB,UACnB,OAAGzB,EACMxB,EAAkBwB,GAElB,KE9BD0B,IAAoB,GAC1BC,QAAS,GACTC,SAAU,IALI7C,wEAQT,IAAAY,EAAA9C,KACHgF,EAAQhF,KAAKuC,MAAMwC,SACtBE,OAAO,SAACC,GAAD,OAAUA,EAAKC,UACtBC,IAAI,SAACF,EAAKG,GACT,OACE1F,EAAAC,EAAAC,cAAA,MAAIa,IAAK2E,GACR1F,EAAAC,EAAAC,cAACyF,EAAD,CAAUvE,KAAMmE,EAAM7D,SAAUyB,EAAK7B,OAAOX,KAAKwC,GAC9CxB,SAAUwB,EAAK1B,OAAOd,KAAKwC,QAMnC,OACEnD,EAAAC,EAAAC,cAAA,OAAKM,UAAU,OACbR,EAAAC,EAAAC,cAAA,UAAKG,KAAKuC,MAAMY,KAAKT,UAAU,SAA/B,iCACG1C,KAAKuC,MAAMY,KAAKpB,GAAKpC,EAAAC,EAAAC,cAAA,UAAQsB,QAASnB,KAAKuF,QAAQjF,KAAKN,OAAnC,gBAAwD,MAEhFL,EAAAC,EAAAC,cAAA,OAAKM,UAAU,gBACfR,EAAAC,EAAAC,cAAC2F,EAAD,CAAWtF,QAASF,KAAKuC,MAAMuC,QAC3B1E,SAAUJ,KAAKK,YAAYC,KAAKN,MAChCW,SAAUX,KAAKyF,QAAQnF,KAAKN,SAEhCL,EAAAC,EAAAC,cAAA,MAAIM,UAAU,YACX6E,GAEFhF,KAAKuC,MAAMY,KAAKpB,GACf,KACApC,EAAAC,EAAAC,cAAC6F,EAAD,CACA/B,SAAU3D,KAAK2F,iBAAiBrF,KAAKN,MACrCkE,SAAUlE,KAAK2F,iBAAiBrF,KAAKN,2CFD7CuB,IAAG6B,KAAKwC,SEON,IAAIzB,EAAYC,KAAKC,MAAMD,KAAKE,UAAUtE,KAAKuC,QAC/C4B,EAAUhB,KAAO,GACjBnD,KAAK4C,SAASuB,4CAEChB,GACf,IAAIgB,EAAYC,KAAKC,MAAMD,KAAKE,UAAUtE,KAAKuC,QAC/C4B,EAAUhB,KAAOA,EACjBnD,KAAK4C,SAASuB,gFAIT1D,EAAGM,GACRA,EAAKC,OAAyB,cAAhBD,EAAKC,OAAyB,GAAK,YACjDhB,KAAK4C,SAAS5C,KAAKuC,2CAETsD,GACV7F,KAAK4C,SAAS,CACZkC,QAASe,EAAMhD,OAAO9C,MACtBgF,SAAU/E,KAAKuC,MAAMwC,2CAGjBc,GACN7F,KAAKuC,MAAMwC,SAASe,KAAK,CACvB/D,GAuBJA,GAAM,EAtBFb,MAAO2E,EAAMhD,OAAO9C,MACpBiB,OAAQ,KACRmE,SAAS,IAEXnF,KAAK4C,SAAS,CACZkC,QAAS,GACTC,SAAU/E,KAAKuC,MAAMwC,0CAIlBc,EAAO9E,GACZA,EAAKoE,SAAU,EACfnF,KAAK4C,SAAS5C,KAAKuC,cAjFL3B,aAwFdmB,EAAK,EC3FTgE,IAASC,OACTrG,EAAAC,EAAAC,cAACoG,EAAD,MACAC,SAASC,eAAe","file":"static/js/main.e6fb6749.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './TodoInput.css'\r\n\r\n export default class TodoInput extends Component {\r\n  render(){\r\n    return <input type=\"text\" value={this.props.content}\r\n    className=\"TodoInput\"\r\n      onChange={this.changeTitle.bind(this)}\r\n    onKeyPress={this.submit.bind(this)}/>\r\n  }\r\n  submit(e){\r\n    if (e.key === 'Enter') {\r\n        this.props.onSubmit(e)\r\n    }\r\n  }\r\n  changeTitle(e){\r\n    this.props.onChange(e)\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './TodoItem.css'\r\n\r\n export default class TodoItem extends Component {\r\n  render(){\r\n    return (\r\n        <div className=\"TodoItem\">\r\n        <input type=\"checkbox\" checked={this.props.todo.status === 'completed'}\r\n          onChange={this.toggle.bind(this)}/> \r\n        <span className=\"title\">{this.props.todo.title}</span>\r\n        <button onClick={this.delete.bind(this)}>删除</button>\r\n        </div>\r\n      )\r\n    }\r\n    toggle(e){\r\n      this.props.onToggle(e, this.props.todo)\r\n  }\r\n  delete(e){\r\n    this.props.onDelete(e, this.props.todo)\r\n  }\r\n}","import AV from 'leancloud-storage'\r\n\r\n var APP_ID = '84GSl2aD34P8veMcp9CKy4Rs-gzGzoHsz'\r\nvar APP_KEY = 'aq4UG3QW6b6jCwMQisogbrVx'\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n})\r\n\r\n export default AV\r\n\r\n export function signUp(username, password, successFn, errorFn){\r\n    // 新建 AVUser 对象实例\r\n   var user = new AV.User()\r\n   // 设置用户名\r\n   user.setUsername(username)\r\n   // 设置密码\r\n   user.setPassword(password)\r\n   // 设置邮箱\r\n   user.signUp().then(function (loginedUser) {\r\n     let user = getUserFromAVUser(loginedUser)\r\n     successFn.call(null, user)\r\n   }, function (error) {\r\n     errorFn.call(null, error)\r\n   })\r\n    return undefined\r\n\r\n  }\r\n\r\n  export function signIn(username, password, successFn, errorFn){\r\n    AV.User.logIn(username, password).then(function (loginedUser) {\r\n      let user = getUserFromAVUser(loginedUser)\r\n      successFn.call(null, user)\r\n    }, function (error) {\r\n      errorFn.call(null, error)\r\n    })\r\n  }\r\n  \r\n  export function getCurrentUser(){\r\n    let user = AV.User.current()\r\n    if(user){\r\n      return getUserFromAVUser(user)\r\n    }else{\r\n      return null\r\n    }\r\n  }\r\n  export function signOut(){\r\n  AV.User.logOut()\r\n  return undefined\r\n}\r\n\r\n  function getUserFromAVUser(AVUser){\r\n   return {\r\n     id: AVUser.id,\r\n     ...AVUser.attributes\r\n   }\r\n}","import React, { Component } from 'react';\r\nimport './UserDialog.css'\r\nimport {signUp, signIn} from './leanCloud'\r\nexport default class UserDialog extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            selected: 'signUp',\r\n            formData: {\r\n              username: '',\r\n              password: '',\r\n            }\r\n        }\r\n      }\r\n      switch(e){\r\n        this.setState({\r\n          selected: e.target.value\r\n        })\r\n      }\r\n      signUp(e){\r\n        e.preventDefault()\r\n        let {username, password} = this.state.formData\r\n        let success = (user)=>{\r\n        this.props.onSignUp.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 202:\r\n                  alert('用户名已被占用')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signUp(username, password, success, error)\r\n      }\r\n      signIn(e){\r\n        e.preventDefault()\r\n        let {username, password} = this.state.formData\r\n        let success = (user)=>{\r\n          this.props.onSignIn.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 210:\r\n                  alert('用户名与密码不匹配')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signIn(username, password, success, error)\r\n      }\r\n      changeFormData(key, e){\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))  // 用 JSON 深拷贝\r\n        stateCopy.formData[key] = e.target.value\r\n        this.setState(stateCopy)\r\n      }\r\n    render(){\r\n        let signUpForm = (\r\n            <form className=\"signUp\" onSubmit={this.signUp.bind(this)}> {/* 注册*/}\r\n              <div className=\"row\">\r\n                <label>用户名</label> \r\n                <input type=\"text\" value={this.state.formData.username}\r\n            onChange={this.changeFormData.bind(this, 'username')}/>\r\n            {/* bind 不仅可以绑定 this，还可以绑定第一个参数 */}\r\n              </div>\r\n              <div className=\"row\">\r\n                <label>密码</label>\r\n                <input type=\"password\" value={this.state.formData.password} \r\n           onChange={this.changeFormData.bind(this, 'password')}/>\r\n              </div>\r\n              <div className=\"row actions\">\r\n                <button type=\"submit\">注册</button>\r\n              </div>\r\n            </form>\r\n          )\r\n          let signInForm = (\r\n            <form className=\"signIn\" onSubmit={this.signIn.bind(this)}> {/* 登录*/}\r\n              <div className=\"row\">\r\n                <label>用户名</label>\r\n                <input type=\"text\" value={this.state.formData.username}\r\n             onChange={this.changeFormData.bind(this, 'username')}/>\r\n              </div>\r\n              <div className=\"row\">\r\n                <label>密码</label>\r\n                <input type=\"password\" value={this.state.formData.password}\r\n             onChange={this.changeFormData.bind(this, 'password')}/>\r\n              </div>\r\n              <div className=\"row actions\">\r\n                <button type=\"submit\">登录</button>\r\n              </div>\r\n            </form>\r\n          ) \r\n    return (\r\n      <div className=\"UserDialog-Wrapper\">\r\n        <div className=\"UserDialog\">\r\n        <nav>\r\n            <label>\r\n              <input type=\"radio\" value=\"signUp\" \r\n                checked={this.state.selected === 'signUp'}\r\n                onChange={this.switch.bind(this)}\r\n              /> 注册</label>\r\n            <label>\r\n              <input type=\"radio\" value=\"signIn\" \r\n                checked={this.state.selected === 'signIn'}\r\n                onChange={this.switch.bind(this)}\r\n              /> 登录</label>\r\n          </nav>\r\n          <div className=\"panes\">\r\n          {this.state.selected === 'signUp' ? signUpForm : null}\r\n            {this.state.selected === 'signIn' ? signInForm : null}           \r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\nimport 'normalize.css'\nimport './reset.css'\nimport './App.css';\nimport TodoInput from './TodoInput'\nimport TodoItem from './TodoItem'\nimport UserDialog from './UserDialog'\nimport {getCurrentUser, signOut} from './leanCloud'\n\nclass App extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: getCurrentUser() || {},\n      newTodo: '',\n      todoList: []\n    }\n  }\n  render() {\n    let todos = this.state.todoList\n    .filter((item)=> !item.deleted)\n    .map((item,index)=>{\n      return ( // 为什么这里要加个括号？这是动手题3 🐸\n        <li key={index}>\n         <TodoItem todo={item} onToggle={this.toggle.bind(this)} \n            onDelete={this.delete.bind(this)}/>\n        </li>\n      )\n    })\n\n\n    return (\n      <div className=\"App\">\n        <h1>{this.state.user.username||'我'}的待办事件\n          {this.state.user.id ? <button onClick={this.signOut.bind(this)}>登出</button> : null}\n        </h1>\n        <div className=\"inputWrapper\">\n        <TodoInput content={this.state.newTodo} \n            onChange={this.changeTitle.bind(this)}\n            onSubmit={this.addTodo.bind(this)} />\n        </div>\n        <ol className=\"todoList\">\n          {todos}\n        </ol>\n        {this.state.user.id ? \n          null : \n          <UserDialog \n          onSignUp={this.onSignUpOrSignIn.bind(this)} \n          onSignIn={this.onSignUpOrSignIn.bind(this)}/>}\n      </div>\n    )\n  }\n  signOut(){\n    signOut()\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\n    stateCopy.user = {}\n    this.setState(stateCopy)\n  }\n  onSignUpOrSignIn(user){\n    let stateCopy = JSON.parse(JSON.stringify(this.state)) \n    stateCopy.user = user\n    this.setState(stateCopy)\n  }\n  componentDidUpdate(){  \n  }\n  toggle(e, todo){\n    todo.status = todo.status === 'completed' ? '' : 'completed'\n    this.setState(this.state)\n  }\n  changeTitle(event){\n    this.setState({\n      newTodo: event.target.value,\n      todoList: this.state.todoList\n    }) \n  }\n  addTodo(event){\n    this.state.todoList.push({\n      id: idMaker(),\n      title: event.target.value,\n      status: null,\n      deleted: false\n    })\n    this.setState({\n      newTodo: '',\n      todoList: this.state.todoList\n    })   \n  }\n  \n  delete(event, todo){\n    todo.deleted = true\n    this.setState(this.state)\n   \n  }\n}\n\nexport default App;\n\nlet id = 0\n\n function idMaker(){\n  id += 1\n  return id\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n<App />,\ndocument.getElementById('root')\n)\n\n"],"sourceRoot":""}