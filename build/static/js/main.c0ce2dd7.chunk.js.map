{"version":3,"sources":["TodoInput.js","TodoItem.js","leanCloud.js","UserDialog.js","App.js","index.js"],"names":["TodoInput","react_default","a","createElement","type","value","this","props","content","className","onChange","changeTitle","bind","onKeyPress","submit","e","key","onSubmit","Component","TodoItem","checked","todo","status","toggle","title","onClick","delete","onToggle","onDelete","AV","init","appId","appKey","Object","extend","save","words","then","object","alert","getUserFromAVUser","AVUser","objectSpread","id","attributes","UserDialog","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","selected","formData","username","password","setState","target","_this2","preventDefault","_this$state$formData","successFn","errorFn","user","User","setUsername","setPassword","signUp","loginedUser","error","onSignUp","code","_this3","_this$state$formData2","logIn","signIn","onSignIn","stateCopy","JSON","parse","stringify","signUpForm","changeFormData","signInForm","switch","App","current","getCurrentUser","newTodo","todoList","todos","filter","item","deleted","map","index","TodoItem_TodoItem","signOut","TodoInput_TodoInput","addTodo","UserDialog_UserDialog","onSignUpOrSignIn","logOut","event","push","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.c0ce2dd7.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './TodoInput.css'\r\n\r\n\r\n export default class TodoInput extends Component {\r\n  render(){\r\n    return <input type=\"text\" value={this.props.content}\r\n    className=\"TodoInput\"\r\n      onChange={this.changeTitle.bind(this)}\r\n    onKeyPress={this.submit.bind(this)}/>\r\n  }\r\n  submit(e){\r\n    if (e.key === 'Enter') {\r\n        this.props.onSubmit(e)\r\n\r\n    }\r\n  }\r\n  changeTitle(e){\r\n    this.props.onChange(e)\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './TodoItem.css'\r\n\r\n export default class TodoItem extends Component {\r\n  render(){\r\n    return (\r\n        <div className=\"TodoItem\">\r\n        <input type=\"checkbox\" checked={this.props.todo.status === 'completed'}\r\n          onChange={this.toggle.bind(this)}/> \r\n        <span className=\"title\">{this.props.todo.title}</span>\r\n        <button onClick={this.delete.bind(this)}>删除</button>\r\n        </div>\r\n      )\r\n      let nr=this.props.todo.title\r\n      return nr\r\n    }\r\n    toggle(e){\r\n      this.props.onToggle(e, this.props.todo)      \r\n  }\r\n  delete(e){\r\n    this.props.onDelete(e, this.props.todo)\r\n  }\r\n}\r\n","import AV from 'leancloud-storage'\r\n\r\n var APP_ID = '84GSl2aD34P8veMcp9CKy4Rs-gzGzoHsz'\r\nvar APP_KEY = 'aq4UG3QW6b6jCwMQisogbrVx'\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n})\r\nvar TestObject = AV.Object.extend('TestObject')\r\nvar testObject = new TestObject()\r\ntestObject.save({\r\n  words:'木有'\r\n}).then(function(object) {\r\n  alert('你记录了你的事件')\r\n})\r\n\r\n export default AV\r\n\r\n export function signUp(username, password, successFn, errorFn){\r\n    // 新建 AVUser 对象实例\r\n   var user = new AV.User()\r\n   // 设置用户名\r\n   user.setUsername(username)\r\n   // 设置密码\r\n   user.setPassword(password)\r\n   // 设置邮箱\r\n   user.signUp().then(function (loginedUser) {\r\n     let user = getUserFromAVUser(loginedUser)\r\n     successFn.call(null, user)\r\n   }, function (error) {\r\n     errorFn.call(null, error)\r\n   })\r\n    return undefined\r\n\r\n  }\r\n\r\n  export function signIn(username, password, successFn, errorFn){\r\n    AV.User.logIn(username, password).then(function (loginedUser) {\r\n      let user = getUserFromAVUser(loginedUser)\r\n      successFn.call(null, user)\r\n    }, function (error) {\r\n      errorFn.call(null, error)\r\n    })\r\n  }\r\n  \r\n  export function getCurrentUser(){\r\n    let user = AV.User.current()\r\n    if(user){\r\n      return getUserFromAVUser(user)\r\n    }else{\r\n      return null\r\n    }\r\n  }\r\n  export function signOut(){\r\n  AV.User.logOut()\r\n  return undefined\r\n}\r\n\r\n  function getUserFromAVUser(AVUser){\r\n   return {\r\n     id: AVUser.id,\r\n     ...AVUser.attributes\r\n   }\r\n}","import React, { Component } from 'react';\r\nimport './UserDialog.css'\r\nimport {signUp, signIn} from './leanCloud'\r\nexport default class UserDialog extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            selected: 'signUp',\r\n            formData: {\r\n              username: '',\r\n              password: '',\r\n            }\r\n        }\r\n      }\r\n      switch(e){\r\n        this.setState({\r\n          selected: e.target.value\r\n        })\r\n      }\r\n      signUp(e){\r\n        e.preventDefault()\r\n        let {username, password} = this.state.formData\r\n        let success = (user)=>{\r\n        this.props.onSignUp.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 202:\r\n                  alert('用户名已被占用')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signUp(username, password, success, error)\r\n      }\r\n      signIn(e){\r\n        e.preventDefault()\r\n        let {username, password} = this.state.formData\r\n        let success = (user)=>{\r\n          this.props.onSignIn.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 210:\r\n                  alert('用户名与密码不匹配')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signIn(username, password, success, error)\r\n      }\r\n      changeFormData(key, e){\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))  // 用 JSON 深拷贝\r\n        stateCopy.formData[key] = e.target.value\r\n        this.setState(stateCopy)\r\n      }\r\n    render(){\r\n        let signUpForm = (\r\n            <form className=\"signUp\" onSubmit={this.signUp.bind(this)}> {/* 注册*/}\r\n              <div className=\"row\">\r\n                <label>用户名</label> \r\n                <input type=\"text\" value={this.state.formData.username}\r\n            onChange={this.changeFormData.bind(this, 'username')}/>\r\n            {/* bind 不仅可以绑定 this，还可以绑定第一个参数 */}\r\n              </div>\r\n              <div className=\"row\">\r\n                <label>密码</label>\r\n                <input type=\"password\" value={this.state.formData.password} \r\n           onChange={this.changeFormData.bind(this, 'password')}/>\r\n              </div>\r\n              <div className=\"row actions\">\r\n                <button type=\"submit\">注册</button>\r\n              </div>\r\n            </form>\r\n          )\r\n          let signInForm = (\r\n            <form className=\"signIn\" onSubmit={this.signIn.bind(this)}> {/* 登录*/}\r\n              <div className=\"row\">\r\n                <label>用户名</label>\r\n                <input type=\"text\" value={this.state.formData.username}\r\n             onChange={this.changeFormData.bind(this, 'username')}/>\r\n              </div>\r\n              <div className=\"row\">\r\n                <label>密码</label>\r\n                <input type=\"password\" value={this.state.formData.password}\r\n             onChange={this.changeFormData.bind(this, 'password')}/>\r\n              </div>\r\n              <div className=\"row actions\">\r\n                <button type=\"submit\">登录</button>\r\n              </div>\r\n            </form>\r\n          ) \r\n    return (\r\n      <div className=\"UserDialog-Wrapper\">\r\n        <div className=\"UserDialog\">\r\n        <nav>\r\n        <label>\r\n              <input type=\"radio\" value=\"signIn\" \r\n                checked={this.state.selected === 'signIn'}\r\n                onChange={this.switch.bind(this)}\r\n              /> 登录</label>\r\n            <label>\r\n              <input type=\"radio\" value=\"signUp\" \r\n                checked={this.state.selected === 'signUp'}\r\n                onChange={this.switch.bind(this)}\r\n              /> 注册</label>            \r\n          </nav>\r\n          <div className=\"panes\">\r\n          {this.state.selected === 'signUp' ? signUpForm : null}\r\n            {this.state.selected === 'signIn' ? signInForm : null}           \r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\nimport 'normalize.css'\nimport './reset.css'\nimport './App.css';\nimport TodoInput from './TodoInput'\nimport TodoItem from './TodoItem'\nimport UserDialog from './UserDialog'\nimport {getCurrentUser, signOut} from './leanCloud'\n\n\n\nclass App extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: getCurrentUser() || {},\n      newTodo: '',\n      todoList: []\n    }\n  }\n  render() {\n    let todos = this.state.todoList\n    .filter((item)=> !item.deleted)\n    .map((item,index)=>{\n      return ( // 为什么这里要加个括号？这是动手题3 🐸\n        <li key={index}>\n         <TodoItem todo={item} onToggle={this.toggle.bind(this)} \n            onDelete={this.delete.bind(this)}/>\n        </li>\n      )\n    })\n\n\n    return (\n      <div className=\"App\">\n        <h1>{this.state.user.username||'我'}的待办事件\n          {this.state.user.id ? <button onClick={this.signOut.bind(this)}>登出</button> : null}\n        </h1>\n        <div className=\"inputWrapper\">\n        <TodoInput content={this.state.newTodo} \n            onChange={this.changeTitle.bind(this)}\n            onSubmit={this.addTodo.bind(this)} />\n        </div>\n        <ol className=\"todoList\">\n          {todos}\n        </ol>\n        {this.state.user.id ? \n          null : \n          <UserDialog \n          onSignUp={this.onSignUpOrSignIn.bind(this)} \n          onSignIn={this.onSignUpOrSignIn.bind(this)}/>}\n      </div>\n    )\n  }\n  signOut(){\n    signOut()\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\n    stateCopy.user = {}\n    this.setState(stateCopy)\n  }\n  onSignUpOrSignIn(user){\n    let stateCopy = JSON.parse(JSON.stringify(this.state)) \n    stateCopy.user = user\n    this.setState(stateCopy)\n  }\n  componentDidUpdate(){  \n  }\n  toggle(e, todo){\n    todo.status = todo.status === 'completed' ? '' : 'completed'\n    this.setState(this.state)\n  }\n  changeTitle(event){\n    this.setState({\n      newTodo: event.target.value,\n      todoList: this.state.todoList\n    }) \n  }\n  addTodo(event){\n    this.state.todoList.push({\n      id: idMaker(),\n      title: event.target.value,\n      status: null,\n      deleted: false\n    })\n    this.setState({\n      newTodo: '',\n      todoList: this.state.todoList\n    })   \n  }\n  \n  delete(event, todo){\n    todo.deleted = true\n    this.setState(this.state)\n   \n  }\n}\n\nexport default App;\n\nlet id = 0\n\n function idMaker(){\n  id += 1\n  return id\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n<App />,\ndocument.getElementById('root')\n)\n\n"],"sourceRoot":""}